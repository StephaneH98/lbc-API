version: 1
frontend:
  phases:
    build:
      commands:
        - echo "🚀 Building frontend..."
        # Remplacer les placeholders dans config.js
        - |
          cat > config.js << 'EOF'
          const CONFIG = {
              API_URL: '${API_URL}',
              AWS_REGION: '${AWS_REGION}',
              ENVIRONMENT: '${ENVIRONMENT}'
          };
          
          if (typeof module !== 'undefined' && module.exports) {
              module.exports = CONFIG;
          }
          
          console.log('⚙️ Configuration chargée:', CONFIG);
          EOF
        - echo "✅ config.js généré avec API_URL=${API_URL}"
  artifacts:
    baseDirectory: /
    files:
      - '**/*'
  cache:
    paths: []